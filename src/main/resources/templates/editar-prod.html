<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Editar Produto</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    </head>
    <body>
    <div class="container bg-light mt-4">
        <div class="container my-5">
        <div>
           <a th:href="@{/api/v1/produto/todos-produtos}" class="btn btn-primary my-2">
           		<i class="fas fa-list ml-2"></i>
           		Todos Produtos
           </a>
           <h2 class="mb-5">Editar Produto</h2>
        </div>   
            <div class="row">
                <div class="border p-2">
                    <form action="#" th:action="@{/api/v1/produto/update/{id}(id=${prod.id})}" 
                    				   enctype="multipart/form-data" th:object="${prod}" method="post">
                        <div class="row">
                        
                        	<div class="form-group col-md-1">
                                <label for="id" class="col-form-label">ID:</label>
                                <input type="text" th:field="*{id}" class="form-control" id="id" placeholder="ID" readonly>
                                <span th:if="${#fields.hasErrors('id')}" th:errors="*{id}" class="text-danger"></span>
                            </div>
                            
                            <div class="form-group col-md-2">
                                <label for="codigoBarras" class="col-form-label">Código de Barras:</label>
                                <input type="text" th:field="*{codigoBarras}" class="form-control" id="codigoBarras" placeholder="codigoBarras">
                                <span th:if="${#fields.hasErrors('codigoBarras')}" th:errors="*{codigoBarras}" class="text-danger"></span>
                            </div>
                            
                            <div class="form-group col-md-2">
                                <label for="preco" class="col-form-label">Preço:</label>
                                <input type="text" th:field="*{preco}" class="form-control" id="preco" placeholder="Preço">
                                <span th:if="${#fields.hasErrors('preco')}" th:errors="*{preco}" class="text-danger"></span>
                            </div>
                            
                            <div class="form-group col-md-2">
                                <label for="statusProd" class="col-form-label">Status:</label>
                                <input type="text" th:field="*{statusProd}" class="form-control" id="statusProd" placeholder="statusProd">
                                <span th:if="${#fields.hasErrors('statusProd')}" th:errors="*{statusProd}" class="text-danger"></span>
                            </div>
                            
                        	<div class="form-group col-md-5">
                                <label for="id" class="col-form-label">Foto:</label>
                                <img th:src="@{'data:image/jpeg;base64,'+${foto}}" alt="..." class="rounded mx-auto d-block img-fluid"/>
                            </div>
     
                            <div class="form-group col-md-10">
                                <label for="nome" class="col-form-label">Nome:</label>
                                <input type="text" th:field="*{nome}" class="form-control" id="nome" placeholder="Nome">
                                <span th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}" class="text-danger"></span>
                            </div>
                            
                             <div class="form-group col-md-2">
                                <label for="tipoProd" class="col-form-label">Tipo do Produto:</label>
                                <input type="text" th:field="*{tipoProd}" class="form-control" id="tipoProd" placeholder="Tipo" disabled />
                                <span th:if="${#fields.hasErrors('tipoProd')}" th:errors="*{tipoProd}" class="text-danger"></span>
                              
                            </div>
                          
                            <div class="form-group col-md-12">
                                <label for="descricao" class="col-form-label">Descrição:</label>
                                <textarea th:field="*{descricao}" class="form-control" id="descricao" rows="4" placeholder="Descrição"> </textarea>
                                <span th:if="${#fields.hasErrors('descricao')}" th:errors="*{descricao}" class="text-danger"></span>
                            </div>
                           
                            <div class="form-group col-md-2">
                                <label for="tipoProd" class="col-form-label">Editar Tipo:</label>
          
                                <select name="tipoProd" >				      
										<option 
											th:each="tipoProd : ${tipos}" 
											th:text="${tipoProd}" th:value="${tipoProd}">
										</option>	 
								</select>
                            </div>
                                                                                   
                             <div class="form-group col-md-5">
                             	<label for="uploadImage" class="form-label">Escolher Imagem:</label>
  								<input class="form-control" type="file" id="uploadImage" onchange="preViewImg();" name="file" accept="image/*" />
                            </div>
                            
                            <div class="form-group col-md-5">
                             	<label for="preView" class="form-label">Imagem Escolhida:</label>
  								<img id="preView" alt="..." class="rounded mx-auto d-block img-fluid"/>
                            </div>
                            
                            <div class="form-group col-md-12">
                                <input type="submit"  class="btn btn-primary mb-2" value="Atualizar Produto">
                            </div>
                            
                        </div>
               
                    </form>
                </div>
            </div>
        </div>
        </div>
        <script type="text/javascript">
        	function preViewImg() {
				var imgPV = new FileReader();
				imgPV.readAsDataURL(document.getElementById("uploadImage").files[0]);
				
				imgPV.onload = function (imgPVEvent) {
					document.getElementById("preView").src = imgPVEvent.target.result;
				}
			}
        </script>
    </body>
</html>